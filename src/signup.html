<html>
 <head>
  <title>
   Fishervice Website Sign Up Page
  </title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&amp;display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="css/signup.css">  
</head>
  <body>
    <!-- Background Video -->
    <video class="background-video" autoplay loop muted>
        <source src="background/Sign Up Fishervice.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>


  <div class="container">
   <!-- Pop-up error -->
   <div id="error-popup" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 20px; background-color: white; color: black; border-radius: 10px; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); width: 300px; text-align: center; z-index: 2;">
      <i id="error-icon" class="fas fa-times-circle" style="color: red; font-size: 40px; margin-bottom: 10px;"></i>
      <p id="error-message" style="font-size: 16px; margin-bottom: 15px;"></p>
      <button id="close-popup" style="background-color: #00aaff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">OK</button>
  </div>

  <!-- Overlay -->
  <div id="page-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1;"></div>
   <div class="overlay">
    <div class="header">
    </div>
    <div class="login-box">
     <img alt="Fish" height="100" src="https://gcdnb.pbrd.co/images/zFDCP4zQaltQ.png?o=1" width="100"/>
     <h2>
        Create Account
     </h2>
     <form action="connect.php" method="post">
        <input placeholder="Full Name" type="name" name="fullname" required/>
        <input placeholder="Phone Number" type="phone"name="phone" required/>
        <input placeholder="you@yourmail.com" type="email" name="email" required/>
        <input placeholder="Password" type="password" name="password" required/>
        <input placeholder="Confirm Password" type="password" name="conpassword" required/>
     <div style="display: flex; justify-content: center; width: 100%;">
      <button type="submit" style="width: 30%;">
       Sign up
      </a>
     </div>
    </div>
    </form>
    <div class="content">
     <h1>
      Fishervice Website
     </h1>
     <h2>
        Sign Up Page
     </h2>
    </div>
</div>
<div class="nav-buttons">
 <a class="btn" href="signin.html">
  Login
 </a>
 <a class="btn btn-signup" href="signup.html">
  Sign up
 </a>
 </div>
  </div>
  <script>
   // Fungsi untuk menampilkan pop-up
   function showPopup(message) {
    const popup = document.getElementById('error-popup');
    const overlay = document.getElementById('page-overlay');
    const messageElement = document.getElementById('error-message');
    const loginBtn = document.querySelector('.nav-buttons .btn:nth-child(1)'); // Tombol Login
   const signupBtn = document.querySelector('.nav-buttons .btn-signup'); // Tombol Sign Up

    // Set pesan di dalam pop-up
    messageElement.textContent = message;

    // Tampilkan pop-up dan overlay
    popup.style.display = 'block';
    overlay.style.display = 'block';

    // Tambahkan class disabled ke tombol untuk meredupkan dan menonaktifkan
    loginBtn.classList.add('disabled');
    signupBtn.classList.add('disabled');

    // Disable klik pada elemen lain selain pop-up
    overlay.style.pointerEvents = 'auto'; // Overlay yang bisa menerima klik
    document.body.style.pointerEvents = 'none'; // Disable pointer di seluruh body
    popup.style.pointerEvents = 'auto'; // Pop-up masih bisa diklik

    // Tambahkan event listener untuk menutup pop-up
    document.getElementById('close-popup').addEventListener('click', function() {
        popup.style.display = 'none';
        overlay.style.display = 'none';
        
        // Hapus class disabled setelah pop-up ditutup
        loginBtn.classList.remove('disabled');
        signupBtn.classList.remove('disabled');

        // Enable kembali klik pada elemen lain
        document.body.style.pointerEvents = 'auto'; 
    });
}



   // Cek apakah ada pesan error dari URL
   const urlParams = new URLSearchParams(window.location.search);
   const error = urlParams.get('error');

   if (error) {
       // Menampilkan pop-up berdasarkan jenis error
       if (error === "email_exists") {
           showPopup("Email sudah digunakan, silakan gunakan email yang lain!");
       } else if (error === "password_mismatch") {
           showPopup("Password tidak cocok!");
       }
   }
</script>

 </body>
</html>